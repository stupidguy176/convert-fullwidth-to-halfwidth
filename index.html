<html> 
  <head> 
    <meta charset = "utf-8"/>
    <head link rel = "stylesheet" type = "text/css" href="http://cdn.grapecity.com/inputmanjs/hosted/css/gc.inputman-js.1.0.css ">
    <script src=" http://cdn.grapecity.com/inputmanjs/hosted/scripts/gc.inputman-js.ja.1.0.js " type = "text/javascript"></script>
  </head>
  <body> 
    <div>
      <p>Convert full to half</p>
      <input id="gcTextBox1">
    </div>
    <script type = "text/javascript">
      function convertFullToHalf(str) {
        return str.replace(/[！-～]/g, r => String.fromCharCode(r.charCodeAt(0) - 0xFEE0))
      }
      function convertTwo(str) {
        var y = str.replace(
          /[\uff01-\uff5e]/g,
          function(ch) {
            return String.fromCharCode(ch.charCodeAt(0) - 0xfee0);
          }
        );
        return y
      }
      function convertToHalfWidth(string) {
        let characters = getCharacters(string);
        let halfWidthString = ''
        characters.forEach(character => {
          halfWidthString += mapToHankaku(character);
        });
        return halfWidthString;
      }

      function getCharacters(string) {
        return string.split("");
      }

      function mapToHankaku(character) {
        let zenHanMap = getZenkakuToHankakuMap();
        if (typeof zenHanMap[character] === 'undefined') {
          return character;
        } else {
          return zenHanMap[character];
        }
      }

      function getZenkakuToHankakuMap() {
        let zenHanMap = {
          'ァ': 'ｧ',
          'ア': 'ｱ',
          'ィ': 'ｨ',
          'イ': 'ｲ',
          'ゥ': 'ｩ',
          'ウ': 'ｳ',
          'ェ': 'ｪ',
          'エ': 'ｴ',
          'ォ': 'ｫ',
          'オ': 'ｵ',
          'カ': 'ｶ',
          'ガ': 'ｶﾞ',
          'キ': 'ｷ',
          'ギ': 'ｷﾞ',
          'ク': 'ｸ',
          'グ': 'ｸﾞ',
          'ケ': 'ｹ',
          'ゲ': 'ｹﾞ',
          'コ': 'ｺ',
          'ゴ': 'ｺﾞ',
          'サ': 'ｻ',
          'ザ': 'ｻﾞ',
          'シ': 'ｼ',
          'ジ': 'ｼﾞ',
          'ス': 'ｽ',
          'ズ': 'ｽﾞ',
          'セ': 'ｾ',
          'ゼ': 'ｾﾞ',
          'ソ': 'ｿ',
          'ゾ': 'ｿﾞ',
          'タ': 'ﾀ',
          'ダ': 'ﾀﾞ',
          'チ': 'ﾁ',
          'ヂ': 'ﾁﾞ',
          'ッ': 'ｯ',
          'ツ': 'ﾂ',
          'ヅ': 'ﾂﾞ',
          'テ': 'ﾃ',
          'デ': 'ﾃﾞ',
          'ト': 'ﾄ',
          'ド': 'ﾄﾞ',
          'ナ': 'ﾅ',
          'ニ': 'ﾆ',
          'ヌ': 'ﾇ',
          'ネ': 'ﾈ',
          'ノ': 'ﾉ',
          'ハ': 'ﾊ',
          'バ': 'ﾊﾞ',
          'パ': 'ﾊﾟ',
          'ヒ': 'ﾋ',
          'ビ': 'ﾋﾞ',
          'ピ': 'ﾋﾟ',
          'フ': 'ﾌ',
          'ブ': 'ﾌﾞ',
          'プ': 'ﾌﾟ',
          'ヘ': 'ﾍ',
          'ベ': 'ﾍﾞ',
          'ペ': 'ﾍﾟ',
          'ホ': 'ﾎ',
          'ボ': 'ﾎﾞ',
          'ポ': 'ﾎﾟ',
          'マ': 'ﾏ',
          'ミ': 'ﾐ',
          'ム': 'ﾑ',
          'メ': 'ﾒ',
          'モ': 'ﾓ',
          'ャ': 'ｬ',
          'ヤ': 'ﾔ',
          'ュ': 'ｭ',
          'ユ': 'ﾕ',
          'ョ': 'ｮ',
          'ヨ': 'ﾖ',
          'ラ': 'ﾗ',
          'リ': 'ﾘ',
          'ル': 'ﾙ',
          'レ': 'ﾚ',
          'ロ': 'ﾛ',
          'ヮ': '',
          'ワ': 'ﾜ',
          // 'ヰ': 'ﾞ  ﾟ',
          // 'ヱ': '',
          'ヲ': 'ｦ',
          'ン': 'ﾝ',
          'ヴ': 'ｳﾞ',
          // 'ヵ': '',
          // 'ヶ': '',
          // 'ヷ': '',
          // 'ヸ': '',
          // 'ヹ': '',
          // 'ヺ': '',
          '・': '･',
          'ー': 'ｰ',
          // 'ヽ': '',
          // 'ヾ': '',
          // 'ヿ': '',
        };
        return zenHanMap;
      }
      window.onload = function() {
        var element = document.getElementById('gcTextBox1');
        element.addEventListener('input', function() {
          console.log('original: ',element.value)
          console.log('version1: ',convertFullToHalf(element.value))
          console.log('version2: ',convertTwo(element.value))
          console.log('version3: ',convertToHalfWidth(element.value))
        });
      }
    </script>
  </body>
</html>